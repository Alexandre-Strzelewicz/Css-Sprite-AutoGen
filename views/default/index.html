{{response.files.append(URL('static','multifile-upload/fileuploader.css'))}}
{{response.files.append(URL('static','multifile-upload/fileuploader.js'))}}
{{extend 'layout.html'}}

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-17708909-6']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<script type="text/javascript">
  function createUploader(){            
     var uploader = new qq.FileUploader({
           element: document.getElementById('file-upload'),
           action: '{{=URL("upload")}}',	
	      sizeLimit: 1500000,		
        minSizeLimit: 0,         
        allowedExtensions: ['gif', 'jpg','ico','png'],
        debug: true,
        onSubmit: function(id, fileName){},
        onProgress: function(id, fileName, loaded, total){},
        onComplete: function(id, fileName, responseJSON){},
        onCancel: function(id, fileName){},
        messages: {
            typeError: "{file} {{=T('has invalid extension.')}} {{=T('Only')}} {extensions} {{=T('are allowed.')}}",
            sizeError: "{file} {{=T('is too large, maximum file size is')}} {sizeLimit}.",
            minSizeError: "{file} {{=T('is too small, minimum file size is')}} {minSizeLimit}.",
            emptyError: "{file} {{=T('is empty, please select files again without it.')}}",
            onLeave: "{{=T('The files are being uploaded, if you leave now the upload will be cancelled.')}}"                         
        },
        showMessage: function(message){ alert(message); }        
     });           
  }
  window.onload = createUploader;     
</script>

<center>
<br/>
<div id="file-upload">
  <noscript>
    <p>Please enable JavaScript to use file uploader.</p>
  </noscript>
</div>
<br/>
<!--<img width="526px" height="324px" src="../static/images/all-to-one.png"></img>-->
</center>

